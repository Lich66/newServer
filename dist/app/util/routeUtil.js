"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const dispatcher_1 = require("./dispatcher");
function hall(session, msg, app, cb) {
    let hallServers = app.getServersByType('hall');
    if (!hallServers || hallServers.length === 0) {
        cb(new Error('can not find hall servers.'));
        return;
    }
    let res = dispatcher_1.dispatch(Math.random().toString(), hallServers);
    cb(null, res.id);
}
exports.hall = hall;
function club(session, msg, app, cb) {
    let clubServers = app.getServersByType('club');
    if (!clubServers || clubServers.length === 0) {
        cb(new Error('can not find club servers.'));
        return;
    }
    console.log(JSON.stringify(clubServers));
    let res = dispatcher_1.dispatch(Math.random().toString(), clubServers);
    console.log('res.id', res.id);
    if (session.uid == '510') {
        res.id = 'club-server-1';
    }
    if (session.uid == '511') {
        res.id = 'club-server-2';
    }
    cb(null, res.id);
}
exports.club = club;
function clubRoom(session, msg, app, cb) {
    let clubRoomServers = app.getServersByType('clubRoom');
    if (!clubRoomServers || clubRoomServers.length === 0) {
        cb(new Error('can not find clubRoom servers.'));
        return;
    }
    let res = dispatcher_1.dispatch(Math.random().toString(), clubRoomServers);
    cb(null, res.id);
}
exports.clubRoom = clubRoom;
function room(session, msg, app, cb) {
    let roomServers = app.getServersByType('room');
    if (!roomServers || roomServers.length === 0) {
        cb(new Error('can not find room servers.'));
        return;
    }
    let res = dispatcher_1.dispatch(Math.random().toString(), roomServers);
    cb(null, res.id);
}
exports.room = room;
function user(session, msg, app, cb) {
    let userServers = app.getServersByType('room');
    if (!userServers || userServers.length === 0) {
        cb(new Error('can not user room servers.'));
        return;
    }
    let res = dispatcher_1.dispatch(Math.random().toString(), userServers);
    cb(null, res.id);
}
exports.user = user;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVVdGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYXBwL3V0aWwvcm91dGVVdGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsNkNBQXdDO0FBR3hDLFNBQWdCLElBQUksQ0FBQyxPQUFnQixFQUFFLEdBQVEsRUFBRSxHQUFnQixFQUFFLEVBQTJDO0lBQzFHLElBQUksV0FBVyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUvQyxJQUFJLENBQUMsV0FBVyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQzFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLENBQUM7UUFDNUMsT0FBTztLQUNWO0lBRUQsSUFBSSxHQUFHLEdBQUcscUJBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFMUQsRUFBRSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDckIsQ0FBQztBQVhELG9CQVdDO0FBRUQsU0FBZ0IsSUFBSSxDQUFDLE9BQWdCLEVBQUUsR0FBUSxFQUFFLEdBQWdCLEVBQUUsRUFBMkM7SUFDMUcsSUFBSSxXQUFXLEdBQUcsR0FBRyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRS9DLElBQUksQ0FBQyxXQUFXLElBQUksV0FBVyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDMUMsRUFBRSxDQUFDLElBQUksS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUMsQ0FBQztRQUM1QyxPQUFPO0tBQ1Y7SUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztJQUV6QyxJQUFJLEdBQUcsR0FBRyxxQkFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxR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