"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Sequelize = require("sequelize");
const tbl_clubuser_1 = require("../../models/tbl_clubuser");
const Op = Sequelize.Op;
const MAXClubUser = 10;
const MAXCOMPETITIONClubUser = 30;
// const CHAIRSTR = 'chair_';
class ClubUser {
    static async findClubUser(json) {
        let result = await tbl_clubuser_1.tbl_clubuser.findOrCreate({ where: { clubid: json.clubid, roomid: json.userid, cid: { [Op.regexp]: '\.' } } });
        return result[0];
    }
    static async deleteClubUser(json) {
        return await tbl_clubuser_1.tbl_clubuser.destroy({ where: { clubid: json.clubid, roomid: json.userid, cid: { [Op.regexp]: '\.' } } });
    }
    static async updateClubUser(ojson, njson) {
        let result = await tbl_clubuser_1.tbl_clubuser.update(njson, { where: { clubid: ojson.clubid, userid: ojson.userid, cid: { [Op.regexp]: '\.' } } });
        return result[1][0];
    }
    /**
     *
     * 获取某用户加入的所有茶楼
     */
    static async getAllClubUserbyUid(json) {
        return await tbl_clubuser_1.tbl_clubuser.findAll({ where: { userid: json.userid, cid: { [Op.regexp]: '\.' } } });
    }
    /**
     *
     * 获取某茶楼加入的所有用户
     */
    static async getAllClubUserbyClubid(json) {
        return await tbl_clubuser_1.tbl_clubuser.findAll({ where: { clubid: json.clubid, cid: { [Op.regexp]: '\.' } } });
    }
}
exports.ClubUser = ClubUser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2x1YlVzZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vYXBwL2NvbnRyb2xsZXIvY2x1YlVzZXJzL2NsdWJVc2Vycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUF1QztBQUd2Qyw0REFBeUQ7QUFHekQsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQztBQUN4QixNQUFNLFdBQVcsR0FBRyxFQUFFLENBQUM7QUFDdkIsTUFBTSxzQkFBc0IsR0FBRyxFQUFFLENBQUM7QUFFbEMsNkJBQTZCO0FBRTdCLE1BQWEsUUFBUTtJQUNWLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQXNCO1FBQ25ELElBQUksTUFBTSxHQUFHLE1BQU0sMkJBQVksQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsSSxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBQ00sTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBc0I7UUFDckQsT0FBTyxNQUFNLDJCQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDM0gsQ0FBQztJQUNNLE1BQU0sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQXVCLEVBQUUsS0FBdUI7UUFDL0UsSUFBSSxNQUFNLEdBQUcsTUFBTSwyQkFBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNySSxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxJQUFzQjtRQUMxRCxPQUFPLE1BQU0sMkJBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RyxDQUFDO0lBQ0Q7OztPQUdHO0lBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxJQUFzQjtRQUM3RCxPQUFPLE1BQU0sMkJBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RyxDQUFDO0NBTUo7QUEvQkQsNEJBK0JDIn0=